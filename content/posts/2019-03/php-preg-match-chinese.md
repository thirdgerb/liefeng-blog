---
title: "php中用正则匹配中文"
date: 2019-03-22T16:38:07+08:00
draft: false
tags: ["php"]
series: []
categories: ["工作随笔"]
img: ""
toc: true
summary: "原本以为正则匹配中文不是什么难事, 结果花了半个多小时. 没时间细细写, 简单记录一下"
---


原本以为正则匹配中文不是什么难事, 结果花了半个多小时. 没时间细细写, 简单记录一下:

正则里的字符本质上是个数, 用 [] 把字符括起来, 就是用数字范围来表示这些字符.

字母 + 数字 就很简单, 直接写 ``` [a-zA-Z0-9] ```


要匹配中文, 通常是给定UTF-8 中中文起点和末尾的两个16进制数, 用来限定中文字符的范围. 但实际使用中踩了好几轮坑, 可以运行下面代码了解一下.


```php

<?php

    // 报warning, pcre 不支持 \u
    preg_match('/^[\u4e00-\u9fa5]+$/', $str);

    // 匹配不上
    preg_match('/^[\x4e00-\x9fa5]+$/', $str);

    // 报错说 \x{} 里的数太大了
    preg_match('/^[\x{4e00}-\x{9fa5}]+$/', $str);


    // 终于成功, 因为是想匹配utf-8字符, 所以一定要用 /u 结尾
    preg_match('/^[\x{4e00}-\x{9fa5}]+$/u', $str);

```

