---
title: "chatbot 的群聊、多模态、异步、双工通信问题"
date: 2020-03-19T13:34:33+08:00
draft: true
tags: ["chatbot"]
series: []
categories: ["开发记录"]
img: ""
toc: true
summary: ""
---

搭建一个 Chatbot 平台并非简单之事。目前很多对话机器人开源项目，都是 "1对1-单平台-同步-单通" 机器人。很多很多业务场景，都是这些机器人项目无法承担的。

对话机器人要进一步推广，迟早必须解决这些问题。这篇文章简单讨论一下它们：

## 群聊

群聊场景看起来，是一个机器人同时和多个用户说话，并维持单一状态机。
这其实是最简单的情况。仔细拆分一下，还可能有：

1. 群里同时存在 Nv1 对话和 1v1 对话， 状态分开运行
1. 同群不同权限，能响应的指令不同
1. 同时进行多个话题

解决方案简单来说，群的对话消息要被人为分割为多个 ChatId，
每一个对于 Chatbot 而言都是独立的会话。

而关键在于， Chat A 要有能力感知、并且修改 Chat B 的会话。
这需要对 Chat 的 Scope 作出更完善的定义。

考虑：

- chatId : 对机器人而言的唯一作用域
- channelId : 广播消息的通道
- userId : 对话的目标用户
- topic(scene) : 当前对话的话题

可以通过 chatId、channelId、userId 三种方式回复消息，以达到不同的回复目的。

## 多模态

现在的开源机器人，几乎只能对文字进行响应，而且单个会话的状态是无法修改的。
管理平台对机器人是放任态度，如果想要动态干预机器人行为，只能修改一些运算逻辑中需要获取的全局变量。这样的机器人无法适应多模态的任务需求。

多模态的概念现在完全被算法垄断了，不用机器学习来解决多模态问题似乎都上不了台面。尴尬。

这里谈的多模态，指的是不同端（语音、桌面、设备）和一个对话机器人共同作用；
输入信号来自于不同的终端，势必需要做统一的抽象；
而机器人的状态是唯一的。机器人对外的输出，又得由多个端同时响应。

我一直认为，多模态最大的问题不是对输入信号的处理，而是裂脑。不同期的输入如果无法做好同步，导致的结果是行为彻底紊乱。






